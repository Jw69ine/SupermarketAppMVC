<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Supermarket App - Product Details</title>
    <style>
        body { background: #f4f7fa; min-height: 100vh;}
        .center-wrap {
            min-height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .popout-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(30,48,120,0.15), 0 1.5px 7px rgba(35,95,164, 0.08);
            padding: 2.5rem 2rem 2rem 2rem;
            max-width: 430px;
            width: 100%;
            animation: popIn 0.38s cubic-bezier(.42,1.16,.46,.95);
        }
        @keyframes popIn {
            from { transform: scale(0.97) translateY(34px); opacity: 0;}
            to   { transform: none; opacity: 1;}
        }
        .product-img-lg {
            max-width: 170px;
            max-height: 170px;
            border-radius: 12px;
            margin-bottom: 1.3rem;
            box-shadow: 0 1px 10px rgba(35,95,164,0.12);
            background: #f9fafd;
            padding: 8px;
        }
        .meta-label {
            font-weight: 500;
            color: #235fa4;
        }
        .meta-value {
            color: #142036;
            font-size: 1.12rem;
        }
        .navbar { margin-bottom: 2rem; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Supermarket App</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav ms-auto">
                    <% if (user.role === "admin") { %>
                        <li class="nav-item"><a class="nav-link" href="/inventory">Inventory</a></li> 
                        <li class="nav-item"><a class="nav-link" href="/addProduct">Add new product</a></li> 
                    <% } %>
                    <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li> 
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid center-wrap">
      <% if (product) { %>
          <div class="popout-card mx-auto">
            <div class="text-center">
                <img src="/images/<%= product.image %>" class="product-img-lg" alt="Product Image">
            </div>
            <div class="mb-3">
                <span class="meta-label">Product Name:</span><br>
                <span class="meta-value"><%= product.productName %></span>
            </div>
            <div class="mb-3">
                <span class="meta-label">Quantity&nbsp;(Stock):</span><br>
                <span class="meta-value"><%= product.quantity %></span>
            </div>
            <div class="mb-3">
                <span class="meta-label">Price:</span><br>
                <span class="meta-value">$<%= product.price.toFixed(2) %></span>
            </div>
            <% if (user.role === "admin") { %>
                <a href="/inventory" class="btn btn-outline-primary w-100 mt-2">Back to Inventory</a>
            <% } else { %>
                <a href="/shopping" class="btn btn-outline-primary w-100 mt-2">Back to Shopping</a>
            <% } %>
          </div>
        <% } else { %>
          <div class="alert alert-warning text-center">No product found.</div>
        <% } %>
    </div>
</body>
</html>
